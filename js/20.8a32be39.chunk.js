(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{450:function(t,e,a){(function(t,r){var n;!function(o){var s=e,l=(t&&t.exports,"object"==typeof r&&r);l.global!==l&&l.window;var c=function(t){this.message=t};(c.prototype=new Error).name="InvalidCharacterError";var i=function(t){throw new c(t)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=/[\t\n\f\r ]/g,h={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,a,r,n,o=t.length%3,s="",l=-1,c=t.length-o;++l<c;)e=t.charCodeAt(l)<<16,a=t.charCodeAt(++l)<<8,r=t.charCodeAt(++l),s+=u.charAt((n=e+a+r)>>18&63)+u.charAt(n>>12&63)+u.charAt(n>>6&63)+u.charAt(63&n);return 2==o?(e=t.charCodeAt(l)<<8,a=t.charCodeAt(++l),s+=u.charAt((n=e+a)>>10)+u.charAt(n>>4&63)+u.charAt(n<<2&63)+"="):1==o&&(n=t.charCodeAt(l),s+=u.charAt(n>>2)+u.charAt(n<<4&63)+"=="),s},decode:function(t){var e=(t=String(t).replace(m,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var a,r,n=0,o="",s=-1;++s<e;)r=u.indexOf(t.charAt(s)),a=n%4?64*a+r:r,n++%4&&(o+=String.fromCharCode(255&a>>(-2*n&6)));return o},version:"0.1.0"};void 0===(n=function(){return h}.call(e,a,e,t))||(t.exports=n)}()}).call(this,a(207)(t),a(56))},657:function(t,e,a){"use strict";a.r(e);var r=a(10),n=a(13),o=a(28),s=a(15),l=a(16),c=a(8),i=a(0),u=a.n(i),m=a(39),h=a(17),d=a(47),p=a(4),f=(a(5),a(57)),_=a(76);function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,r=Object(c.a)(t);if(e){var n=Object(c.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(l.a)(this,a)}}var g=a(450),N=function(t){Object(s.a)(a,t);var e=b(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).onHandle=function(){var t=Object(o.a)(n),e=n.props.match.params.model;try{var a=JSON.parse(g.decode(e));a.uid!=t.state.model.uid&&t.setState({model:a,loading:!0},function(){t.props.getReportByAgent(a.uid,a.s_id,a.e_id,a.stat,function(e){t.setState({list:e.summary_list,nav_list:e.nav_list,loading:!1,current_role:e.current_role,child_role:Object(p.i)(e.current_role)})})})}catch(r){alert(r),f.a.goBack()}},n.gotoNext=function(){var t=n.state.model;"normal"===t.from?f.a.push({pathname:"/report/orderlist/"+g.encode(JSON.stringify({uid:t.uid,s_date:t.s_date,s_id:t.s_id,s_period:t.s_period,e_date:t.e_date,e_id:t.e_id,e_period:t.e_period,stat:t.stat,from:"agent"}))}):f.a.push({pathname:"/report/pa_monthly/"+g.encode(JSON.stringify(t))})},n.gotoNav=function(t){var e=n.state.model;f.a.push({pathname:"/report/agent/"+g.encode(JSON.stringify({uid:t,s_date:e.s_date,s_id:e.s_id,s_period:e.s_period,e_date:e.e_date,e_id:e.e_id,stat:e.stat,e_period:e.e_period}))})},n.goBack=function(){f.a.goBack()},n.htmlNumber=function(t){return t>=0?Object(p.g)(t,2):u.a.createElement("font",{color:"red"},Object(p.g)(t,2))},n.getXiajiOP=function(t,e){for(var a=Object(p.i)(e),r=t["op"+a];r.yoji<=0&&a>1;)r=t["op"+(a=Object(p.i)(a))];return 0===r.yoji?t["op"+e]:r},n.getXiajiRole=function(t,e){for(var a=Object(p.i)(e),r=t["op"+a];r.yoji<=0&&a>1;)r=t["op"+(a=Object(p.i)(a))];return 0===r.yoji?e:a},n.sum=function(t,e){var a=0;return t.forEach(function(t){a+=t[e]}),a},n.sumYoji=function(t,e){for(var a=0,r=0;r<t.length;r++){var o=t[r];a+=o["op"+e].amount*(o["op"+e].yoji-n.getXiajiOP(o,e).yoji)/100}return a},n.getRoleList=function(){for(var t=20,e=new Array;t<n.state.current_role;)e.push(t),70===t?t=999:t+=10;return e},n.sumItem=function(t,e,a){return n.sum(t.map(function(t){return t["op"+e]}),a)},n.export=function(t,e){var a=Object(o.a)(n),r=[];r.push("\u5f69\u79cd"),r.push("\u603b\u7b14\u6570"),r.push("\u603b\u4e0b\u6ce8"),r.push("\u603b\u6709\u6548\u4e0b\u6ce8"),r.push("\u4f1a\u5458\u7ed3\u679c"),n.getRoleList().forEach(function(t){r.push(Object(p.k)(t)+"\u4ea4\u6536")}),r.push("\u5360\u6210\u8d27\u91cf"),r.push("\u5360\u6210\u8f93\u8d62"),r.push("\u9000\u6c34\u5dee"),r.push(Object(p.k)(t)+"\u8f93\u8d62"),r.push("\u4e0a\u7f34\u8d27\u91cf"),r.push(Object(p.k)(t)+"\u4ea4\u6536");var s=[];n.state.list.forEach(function(e){var r=new Array;r.push("\u6fb3\u95e8\u516d\u5408\u5f69"),r.push(Object(p.g)(e.total_count)),r.push(Object(p.g)(e.total_amount)),r.push(Object(p.g)(e.total_amount)),r.push(Object(p.g)(e.op1.final_profit)),a.getRoleList().forEach(function(t){r.push(Object(p.g)(e["op"+t].pay_out,2))}),r.push(Object(p.g)(e["op"+t].amount)),r.push(Object(p.g)(e["op"+t].profit)),r.push(Object(p.g)(e["op"+t].fee_in-e["op"+t].fee_out)),r.push(Object(p.g)(e["op"+t].final_profit)),r.push(Object(p.g)(e["op"+t].pay_amout)),r.push(Object(p.g)(e["op"+t].pay_out)),s.push(r)});var l=a.state.model.s_date+"-"+a.state.model.e_date+".xlsx";Object(p.e)(r,s,l)},n.state={inited:!1,loading:!0,totalVO:{total_amount:0,total_yoji:0,total_profit:0,total_final_profit:0},current_role:20,child_role:20,list:[],nav_list:[{}],model:{uid:"",s_date:"",s_id:"",s_period:"",e_date:"",e_id:"",stat:1,e_period:""}},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){this.onHandle()}},{key:"componentWillReceiveProps",value:function(){this.onHandle()}},{key:"render",value:function(){var t=this,e=this.state,a=e.list,r=e.current_role,n=e.child_role,o=e.nav_list,s=e.model,l=e.loading;return u.a.createElement("div",{class:"module m5"},u.a.createElement("div",{name:"module",id:"report_index"},u.a.createElement("div",{className:"caption mt5 pb5"},u.a.createElement("div",{class:"fl"},u.a.createElement("button",{className:"za_button",onClick:this.goBack.bind(this)},"\u8fd4\u56de"),"\xa0\xa0\xa0\xa0",u.a.createElement("button",{className:"btn",style:{marginLeft:"6px"},onClick:this.export.bind(this,r,n)},"\u62a5\u8868\u5907\u4efd"))),u.a.createElement("table",{className:"t-1 f14"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("td",{className:"hl3",colSpan:11+this.getRoleList().length},u.a.createElement("span",null,Object(p.k)(o[o.length-1].role),":",o[o.length-1].username)," | \u65e5\u671f\uff1a",s.s_date," - ",s.e_date," | \u7ed3\u7b97\u72b6\u6001\uff1a",1===s.stat?"\u5df2\u7ed3\u7b97":"\u672a\u7ed3\u7b97")),u.a.createElement("tr",null,u.a.createElement("td",null,"\u5f69\u79cd"),u.a.createElement("td",null,"\u603b\u7b14\u6570"),u.a.createElement("td",null,"\u603b\u4e0b\u6ce8"),u.a.createElement("td",null,"\u603b\u6709\u6548\u4e0b\u6ce8"),u.a.createElement("td",null,"\u4f1a\u5458\u7ed3\u679c"),this.getRoleList().map(function(t){return u.a.createElement("td",null,Object(p.k)(t),"\u4ea4\u6536")}),u.a.createElement("td",{className:"hl"},"\u5360\u6210\u8d27\u91cf"),u.a.createElement("td",{className:"hl"},"\u5360\u6210\u8f93\u8d62"),u.a.createElement("td",{className:"hl"},"\u9000\u6c34\u5dee"),u.a.createElement("td",{className:"hl"},Object(p.k)(r),"\u8f93\u8d62"),u.a.createElement("td",{className:"hl"},"\u4e0a\u7f34\u8d27\u91cf"),u.a.createElement("td",null,Object(p.k)(r),"\u4ea4\u6536"))),u.a.createElement("tbody",null,l&&u.a.createElement("tr",null,u.a.createElement("td",{colSpan:11+this.getRoleList().length},u.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}))),u.a.createElement("tr",{className:"fn-over"},u.a.createElement("td",{className:"hl4",style:{textAlign:"center"}},"\u6fb3\u95e8\u516d\u5408\u5f69"),u.a.createElement("td",{className:"",onClick:this.gotoNext.bind(this),style:{color:"red",cursor:"pointer"}},this.htmlNumber(this.sum(a,"total_count"))),u.a.createElement("td",{className:""},this.htmlNumber(this.sum(a,"all_total_amount"))),u.a.createElement("td",{className:""},this.htmlNumber(this.sum(a,"total_amount"))),u.a.createElement("td",{className:""},this.htmlNumber(this.sum(a.map(function(t){return t.op1}),"final_profit"))),this.getRoleList().map(function(e){return u.a.createElement("td",{className:""},t.htmlNumber(-1*t.sum(a.map(function(t){return t["op"+e]}),"pay_out")))}),u.a.createElement("td",{className:""},this.htmlNumber(this.sum(a.map(function(t){return t["op"+r]}),"amount"))),u.a.createElement("td",{className:""},1!==s.stat?0:this.htmlNumber(-1*(this.sumItem(a,r,"final_profit")-this.sumItem(a,r,"diff_odds_profit")))),u.a.createElement("td",{className:""},this.htmlNumber(this.sumItem(a,r,"diff_odds_profit"))),u.a.createElement("td",null,this.htmlNumber(1!==s.stat?-1*this.sumItem(a,r,"diff_odds_profit"):-1*this.sumItem(a,r,"final_profit"))),u.a.createElement("td",{className:""},this.htmlNumber(this.sum(a.map(function(t){return t["op"+r]}),"pay_amout"))),u.a.createElement("td",{className:""},this.htmlNumber(-1*this.sum(a.map(function(t){return t["op"+r]}),"pay_out"))))),u.a.createElement("tfoot",{className:"tr bold"},u.a.createElement("tr",null,u.a.createElement("td",{className:"hl5"},"\u5408\u8ba1"),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_count"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"all_total_amount"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_amount"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(t){return t.op1}),"final_profit"))),this.getRoleList().map(function(e){return u.a.createElement("td",{className:"hl5"},t.htmlNumber(-1*t.sum(a.map(function(t){return t["op"+e]}),"pay_out")))}),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(t){return t["op"+r]}),"amount"))),u.a.createElement("td",{className:"hl5"},1!==s.stat?0:this.htmlNumber(-1*(this.sumItem(a,r,"final_profit")-this.sumItem(a,r,"diff_odds_profit")))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sumItem(a,r,"diff_odds_profit"))),u.a.createElement("td",{style:{backgroundColor:"red",color:"#fff"}},Object(p.g)(1!==s.stat?-1*this.sumItem(a,r,"diff_odds_profit"):-1*this.sumItem(a,r,"final_profit"),2)),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(t){return t["op"+r]}),"pay_amout"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(-1*this.sum(a.map(function(t){return t["op"+r]}),"pay_out"))))))))}}]),a}(i.Component);e.default=Object(m.g)(Object(d.a)(function(){return{}},function(t){return Object(h.c)({getReportByAgent:_.k},t)})(N))}}]);