(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{644:function(e,t,a){"use strict";a.r(t);var n=a(10),l=a(13),r=a(15),m=a(16),c=a(8),u=a(0),o=a.n(u),i=a(39),s=a(17),d=a(47),f=a(4),p=a(76),h=(a(5),a(63)),E=a(57);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var l=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var g=function(e){Object(r.a)(a,e);var t=y(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).goBack=function(){E.a.goBack()},l.onAllFeeChange=function(){var e=parseFloat(document.getElementById("myfee-all").value);if(!isNaN(e)&&e<=20)for(var t=l.state.list,a=0;a<t.length;a++){var n=t[a],r=Object(f.f)(n.odds,n.parent_total_fee+n.myfee+e/100);document.getElementById("live_odd_"+a).innerHTML=r,document.getElementById("myfee-"+a).value=e}else alert("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6570\u5b57")},l.onAllMaxChange=function(){var e=parseFloat(document.getElementById("max-all").value);if(isNaN(e))alert("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6570\u5b57");else for(var t=l.state.list,a=0;a<t.length;a++){var n=t[a];e>n.parent_max?document.getElementById("max-"+a).value=n.parent_max:document.getElementById("max-"+a).value=e}},l.onAllTMaxChange=function(){var e=parseFloat(document.getElementById("tmax-all").value);if(isNaN(e))alert("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6570\u5b57");else for(var t=l.state.list,a=0;a<t.length;a++){var n=t[a];e>n.parent_tmax?document.getElementById("tmax-"+a).value=n.parent_tmax:document.getElementById("tmax-"+a).value=e}},l.onFeeChange=function(e,t){var a=parseFloat(document.getElementById("myfee-"+e).value);if(!isNaN(a))if(a<=t){var n=l.state.list[e],r=Object(f.f)(n.odds,n.parent_total_fee+a/100);document.getElementById("live_odd_"+e).innerHTML=r}else document.getElementById("myfee-"+e).value="0",l.onFeeChange(0,t)},l.onChangeNum=function(e,t){var a=parseFloat(document.getElementById(e).value);!isNaN(a)&&a<=t||(document.getElementById(e).value=t,l.onFeeChange(t,t))},l.state={user:{username:"",name:""},uid:"",list:[]},l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.uid,t=this;t.props.getFeeConfig(e,function(a){t.setState({list:a,uid:e})}),t.props.getUser(e,function(e){t.setState({user:e})})}},{key:"onSaveSubmit",value:function(){for(var e=Object(f.j)("yoji_form"),t=this.state.list,a=new Array,n=0;n<t.length;n++){var l=t[n],r=parseFloat(e["myfee_"+l.name]);isNaN(r)&&(r=0);var m={name:l.name,fee_in:Object(f.g)(r/100,5),max:e["max_"+l.name],tmax:e["tmax_"+l.name]};a.push(m)}this.props.setUserTerm({uid:this.state.uid,list:a},function(e){Object(h.a)({title:"\u63d0\u793a",message:"\u4fee\u6539\u6210\u529f\uff01",hasCancel:!1,onConfirm:function(){}})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.user;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"titlebar"},o.a.createElement("span",{style:{fontSize:"14px"}},n.username," \u7684\u9000\u6c34\u9650\u989d\u8bbe\u7f6e"),"\xa0\xa0",o.a.createElement("button",{className:"btn",style:{marginLeft:"6px"},onClick:this.goBack.bind(this)},"\u8fd4\u56de")),o.a.createElement("form",{id:"yoji_form",name:"yoji_form"},o.a.createElement("table",{className:"t-1 tc",style:{width:"100%",display:"inline-table",marginLeft:"0px"}},o.a.createElement("thead",null,o.a.createElement("th",null,"\u6fb3\u95e8\u516d\u5408\u5f69"),o.a.createElement("th",null,"\u8d54\u7387"),o.a.createElement("th",null,"\u8d5a\u6c34\u8c03\u6574\uff08%\uff09"),o.a.createElement("th",null,"\u6d6e\u52a8\u8d54\u7387"),o.a.createElement("th",null,"\u5355\u6ce8\u9650\u989d"),o.a.createElement("th",null,"\u5355\u671f\u9650\u989d")),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"hl"},"\u5168\u90e8"),o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement("input",{type:"text",className:"w64",defaultValue:"",id:"myfee-all"})," ",o.a.createElement("input",{type:"button",value:"\u8abf\u6574",onClick:this.onAllFeeChange.bind(this)})),o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement("input",{type:"text",className:"w64",defaultValue:"",id:"max-all"})," ",o.a.createElement("input",{type:"button",value:"\u8abf\u6574",onClick:this.onAllMaxChange.bind(this)})),o.a.createElement("td",null,o.a.createElement("input",{type:"text",className:"w64",defaultValue:"",id:"tmax-all"})," ",o.a.createElement("input",{type:"button",value:"\u8abf\u6574",onClick:this.onAllTMaxChange.bind(this)}))),a.map(function(t,a){return o.a.createElement("tr",null,o.a.createElement("td",{className:"hl"},t.name),o.a.createElement("td",null,Object(f.f)(t.odds,t.parent_total_fee)),o.a.createElement("td",null,o.a.createElement("input",{type:"text",key:"myfee-"+a,id:"myfee-"+a,defaultValue:Object(f.g)(100*t.myfee,5),name:"myfee_"+t.name,onChange:e.onFeeChange.bind(e,a,20),className:"w64 "}),"  ",o.a.createElement("font",{color:"red"},"\u6700\u9ad8 20.00")),o.a.createElement("td",{id:"live_odd_"+a},Object(f.f)(t.odds,t.parent_total_fee+t.myfee)),o.a.createElement("td",null,o.a.createElement("input",{key:"max-"+a,id:"max-"+a,defaultValue:t.max,name:"max_"+t.name,className:"w64 ",onChange:e.onChangeNum.bind(e,"max-"+a,t.parent_max)}),"  ",o.a.createElement("font",{color:"red"},"\u6700\u9ad8",t.parent_max)," "),o.a.createElement("td",null,o.a.createElement("input",{key:"tmax-"+a,id:"tmax-"+a,defaultValue:t.tmax,name:"tmax_"+t.name,className:"w64 ",onChange:e.onChangeNum.bind(e,"tmax-"+a,t.parent_tmax)}),"  ",o.a.createElement("font",{color:"red"},"\u6700\u9ad8",t.parent_tmax)," "))})),o.a.createElement("tfoot",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"6"}," ",o.a.createElement("button",{type:"button",class:"btn red",onClick:this.onSaveSubmit.bind(this)},"\u4fdd\u5b58"),' (\u6240\u6709\u53d8\u52a8\u5728\u70b9\u9009"\u4fdd\u5b58"\u540e\u751f\u6548) '))))))}}]),a}(u.Component);t.default=Object(i.g)(Object(d.a)(function(e){return{loginer:e.auth.user}},function(e){return Object(s.c)({getFeeConfig:p.g,getUser:p.m,setUserTerm:p.G},e)})(g))}}]);