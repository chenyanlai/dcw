(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{449:function(e,t,a){"use strict";var n=a(10),r=a(13),l=a(28),c=a(15),i=a(16),o=a(8),s=a(0),u=a.n(s),d=(a(47),a(4),a(5));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var m=function(e){Object(c.a)(a,e);var t=p(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onPage=function(e){e<=0||(r.setState({current_page:e}),r.props.onPage&&r.props.onPage(e))},r.onPageGo=function(){var e=document.getElementById("page_nav_go_inp").value;if(""!==e){var t=parseInt(e);t<=0||t>r.state.total_page||(r.setState({current_page:t}),r.props.onPage&&r.props.onPage(t))}},r.getPageData=function(e,t){if(t.length<=12)return t;var a=new Array;return e<=2?(a.push(t[0]),a.push(t[1]),a.push(t[2]),a.push(t[3]),a.push(t[5]),a.push({idx:0,label:" . . . "}),a.push(t[t.length-5]),a.push(t[t.length-4]),a.push(t[t.length-3]),a.push(t[t.length-2]),a.push(t[t.length-1])):(a.push(t[e-3]),a.push(t[e-2]),a.push(t[e-1]),e<=t.length-1&&a.push(t[e]),e+1<=t.length-1&&(a.push(t[e+1]),t.length-5>e+2&&a.push({idx:0,label:" . . . "}),e+2<=t.length-5&&a.push(t[t.length-5]),e+2<=t.length-4&&a.push(t[t.length-4]),e+2<=t.length-3&&a.push(t[t.length-3]),e+2<=t.length-2&&a.push(t[t.length-2]),e+2<=t.length-1&&a.push(t[t.length-1]))),a},r.getS1=function(e,t,a,n){return u.a.createElement("div",{name:"module",id:"pager",class:"pager",action:"result",format:"format_result"},"\u7b2c ",u.a.createElement("span",{class:"pageindex red"},e)," \u9875 \u5171 ",u.a.createElement("span",{class:"pagecount red"},t)," \u9875 \u5171 ",u.a.createElement("span",{class:"recordcount red"},a)," \u6761",u.a.createElement("a",{href:"javascript:void(0)",class:"fn-first",onClick:r.onPage.bind(Object(l.a)(r),1)},"\u9996\u9875"),1===e&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-prev"},"\u4e0a\u4e00\u9875"),e>1&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-prev",onClick:r.onPage.bind(Object(l.a)(r),e-1)},"\u4e0a\u4e00\u9875"),e===t&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-next"},"\u4e0b\u4e00\u9875"),e<t&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-next",onClick:r.onPage.bind(Object(l.a)(r),e+1)},"\u4e0b\u4e00\u9875"),u.a.createElement("a",{href:"javascript:void(0)",class:"fn-last",onClick:r.onPage.bind(Object(l.a)(r),t)},"\u5c3e\u9875"),u.a.createElement("input",{type:"text",id:"page_nav_go_inp",class:"input w30 fn-index"}),"\xa0",u.a.createElement("input",{type:"button",onClick:r.onPageGo.bind(Object(l.a)(r)),class:"btn btn-gray w30 fn-go",value:"GO"}))},r.getS2=function(e,t,a,n){return u.a.createElement("nav",{"aria-label":"Page navigation"},u.a.createElement("ul",{class:"pagination pagination-lg justify-content-center"},e>1&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u9996\u9875")),1===e&&u.a.createElement("li",{class:"page-item disabled"},u.a.createElement("a",{class:"page-link",href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0a\u4e00\u9801")),e>1&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),e-1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0a\u4e00\u9801")),r.getPageData(e,n).map(function(t){return u.a.createElement("li",{className:e===t.idx?"page-item active":"page-item"},u.a.createElement("a",{onClick:r.onPage.bind(Object(l.a)(r),t.idx),className:"page-link",href:"javascript:;"},t.label))}),e===t&&u.a.createElement("li",{class:"page-item disabled"},u.a.createElement("a",{class:"page-link",href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0b\u4e00\u9801")),e<t&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),e+1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0b\u4e00\u9801"))))},r.state={pager:{},list:[],total_page:1,current_page:1,total:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.pager;this.setData(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.pager;this.setData(e)}},{key:"setData",value:function(e){if(!d.a.isEqual(e,this.state.pager)){var t=Math.floor(e.total/e.size);e.total%e.size!==0&&t++;for(var a=new Array,n=1;n<=t;n++)a.push({idx:n,label:n});var r=e.offset/e.size+1;this.setState({list:a,total_page:t,current_page:r,total:e.total,pager:e})}}},{key:"render",value:function(){var e=this.state,t=e.current_page,a=e.total_page,n=e.list,r=e.total;return this.getS1(t,a,r,n)}}]),a}(s.Component);t.a=m},450:function(e,t,a){(function(e,n){var r;!function(l){var c=t,i=(e&&e.exports,"object"==typeof n&&n);i.global!==i&&i.window;var o=function(e){this.message=e};(o.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new o(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,p={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,a,n,r,l=e.length%3,c="",i=-1,o=e.length-l;++i<o;)t=e.charCodeAt(i)<<16,a=e.charCodeAt(++i)<<8,n=e.charCodeAt(++i),c+=u.charAt((r=t+a+n)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==l?(t=e.charCodeAt(i)<<8,a=e.charCodeAt(++i),c+=u.charAt((r=t+a)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==l&&(r=e.charCodeAt(i),c+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),c},decode:function(e){var t=(e=String(e).replace(d,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var a,n,r=0,l="",c=-1;++c<t;)n=u.indexOf(e.charAt(c)),a=r%4?64*a+n:n,r++%4&&(l+=String.fromCharCode(255&a>>(-2*r&6)));return l},version:"0.1.0"};void 0===(r=function(){return p}.call(t,a,t,e))||(e.exports=r)}()}).call(this,a(207)(e),a(56))},658:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(13),l=a(28),c=a(15),i=a(16),o=a(8),s=a(0),u=a.n(s),d=a(25),p=a(39),m=a(17),h=a(47),f=a(4),g=(a(5),a(57)),b=a(76);a(449);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var _=a(450),E=function(e){Object(c.a)(a,e);var t=v(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).goBack=function(){g.a.goBack()},r.htmlNumber=function(e){return e>=0?Object(f.g)(e,2):u.a.createElement("font",{color:"red"},Object(f.g)(e,2))},r.sum=function(e,t){var a=0;return e.forEach(function(e){a+=e[t]}),a},r.gotoNav=function(e){var t=r.state.model;g.a.push({pathname:"/report/"+t.from+"/"+_.encode(JSON.stringify({uid:e,s_date:t.s_date,s_id:t.s_id,s_period:t.s_period,e_date:t.e_date,e_id:t.e_id,e_period:t.e_period}))})},r.gotoMember=function(e,t){var a=r.state.model;g.a.push({pathname:"/report/orderlist/"+_.encode(JSON.stringify({uid:e,s_date:a.s_date,s_id:a.s_id,s_period:a.s_period,e_date:a.e_date,e_id:a.e_id,e_period:a.e_period,from:a.from,lottery_id:t}))})},r.getTrData=function(e,t){return u.a.createElement("tr",null,u.a.createElement("td",null,t+1),u.a.createElement("td",null,u.a.createElement(d.a,{to:"#",onClick:r.gotoMember.bind(Object(l.a)(r),e.uid,e.lottery_id)},e.period.substring(2))),u.a.createElement("td",null,u.a.createElement(d.a,{to:"#",onClick:r.gotoMember.bind(Object(l.a)(r),e.uid,e.lottery_id)},Object(f.a)(e.luck_time,"yyyy-MM-dd"))),u.a.createElement("td",null,Object(f.g)(e.total_count)),u.a.createElement("td",null,Object(f.g)(e.total_amount)),u.a.createElement("td",null,r.htmlNumber(e.op1.final_profit)))},r.state={inited:!1,totalVO:{total_amount:0,total_yoji:0,total_profit:0,total_final_profit:0},current_role:window.role,child_role:20,list:[],pager:{offset:0,size:0,total:0},nav_list:[],model:{uid:"",s_date:"",s_id:"",s_period:"",e_date:"",e_id:"",e_period:"",from:"agent"}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.model;try{var a=JSON.parse(_.decode(t));a.uid!=e.state.model.uid&&e.setState({model:a},function(){e.props.getReportByLottery(a.uid,a.s_id,a.e_id,function(t){e.setState({list:t.summary_list,nav_list:t.nav_list,current_role:t.current_role,child_role:Object(f.i)(t.current_role)})})})}catch(n){alert(n),g.a.goBack()}}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.nav_list,r=t.model;return u.a.createElement("div",{class:"module m5"},u.a.createElement("div",{name:"module",id:"report_index"},u.a.createElement("div",{className:"caption mt5 pb5"},u.a.createElement("div",{class:"fl"},u.a.createElement("i",{class:"ico ico-gold"}),"\u8f93\u8d62\u62a5\u8868",n.map(function(t){return r.uid===t.uid?u.a.createElement("span",null," - ",Object(f.k)(t.role),"[",t.username,"]"):u.a.createElement("span",null," - ",Object(f.k)(t.role),"[",u.a.createElement(d.a,{to:"#",onClick:e.gotoNav.bind(e,t.uid),style:{fontSize:"12px"}},t.username),"]")}),r.s_period.substring(4),"\u671f(",r.s_date,") - ",r.e_period.substring(4),"\u671f(",r.e_date,")",u.a.createElement("button",{className:"btn",style:{marginLeft:"6px"},onClick:this.goBack.bind(this)},"\u8fd4\u56de"))),u.a.createElement("div",{className:""},u.a.createElement("table",{className:"t-1 f14"},u.a.createElement("thead",null,u.a.createElement("tr",{className:"bg1"},u.a.createElement("td",null,"\u5e8f\u53f7"),u.a.createElement("td",null,"\u671f\u6570"),u.a.createElement("td",null,"\u65e5\u671f"),u.a.createElement("td",null,"\u6ce8\u6570"),u.a.createElement("td",null,"\u4e0b\u6ce8\u91d1\u989d"),u.a.createElement("td",{style:{color:"yellow"}},"\u4f1a\u5458\u76c8\u4e8f"))),u.a.createElement("tbody",{className:"tr fn-hover"},a.map(function(t,a){return e.getTrData(t,a)})),u.a.createElement("tfoot",{className:"tr bold"},u.a.createElement("tr",null,u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null,"\u5408\u8ba1"),u.a.createElement("td",null,this.htmlNumber(this.sum(a,"total_count"))),u.a.createElement("td",null,this.htmlNumber(this.sum(a,"total_amount"))),u.a.createElement("td",null,this.htmlNumber(this.sum(a.map(function(e){return e.op1}),"final_profit")))))))))}}]),a}(s.Component);t.default=Object(p.g)(Object(h.a)(function(e){return{loginer:e.auth.user}},function(e){return Object(m.c)({getReportByLottery:b.l},e)})(E))}}]);