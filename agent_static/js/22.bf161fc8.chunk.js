(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{450:function(e,t,a){(function(e,l){var r;!function(n){var o=t,s=(e&&e.exports,"object"==typeof l&&l);s.global!==s&&s.window;var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var m=function(e){throw new c(e)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&m("The string to be encoded contains characters outside of the Latin1 range.");for(var t,a,l,r,n=e.length%3,o="",s=-1,c=e.length-n;++s<c;)t=e.charCodeAt(s)<<16,a=e.charCodeAt(++s)<<8,l=e.charCodeAt(++s),o+=i.charAt((r=t+a+l)>>18&63)+i.charAt(r>>12&63)+i.charAt(r>>6&63)+i.charAt(63&r);return 2==n?(t=e.charCodeAt(s)<<8,a=e.charCodeAt(++s),o+=i.charAt((r=t+a)>>10)+i.charAt(r>>4&63)+i.charAt(r<<2&63)+"="):1==n&&(r=e.charCodeAt(s),o+=i.charAt(r>>2)+i.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(u,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&m("Invalid character: the string to be decoded is not correctly encoded.");for(var a,l,r=0,n="",o=-1;++o<t;)l=i.indexOf(e.charAt(o)),a=r%4?64*a+l:l,r++%4&&(n+=String.fromCharCode(255&a>>(-2*r&6)));return n},version:"0.1.0"};void 0===(r=function(){return d}.call(t,a,t,e))||(e.exports=r)}()}).call(this,a(207)(e),a(56))},655:function(e,t,a){"use strict";a.r(t);var l=a(10),r=a(13),n=a(28),o=a(15),s=a(16),c=a(8),m=a(0),i=a.n(m),u=a(25),d=a(39),p=a(17),h=a(47),f=a(4),_=(a(5),a(57)),E=a(76);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,l=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return Object(s.a)(this,a)}}var g=a(450),N=function(e){Object(o.a)(a,e);var t=b(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).onHandle=function(){var e=Object(n.a)(r),t=r.props.match.params.model;try{var a=JSON.parse(g.decode(t));a.uid!=e.state.model.uid&&e.setState({model:a,loading:!0},function(){e.props.getReportByAgent(a.uid,a.s_id,a.e_id,a.stat,function(t){e.setState({list:t.summary_list,nav_list:t.nav_list,current_role:t.current_role,loading:!1,child_role:Object(f.i)(t.current_role)})})})}catch(l){alert(l),_.a.goBack()}},r.gotoNext=function(e,t,a){var l=r.state.model;1===t||"\u4e0b\u7ea7\u98de\u5355"===a?_.a.push({pathname:"/report/orderlist/"+g.encode(JSON.stringify({uid:e,s_date:l.s_date,s_id:l.s_id,s_period:l.s_period,e_date:l.e_date,e_id:l.e_id,e_period:l.e_period,stat:l.stat,from:"agent"}))}):"\u624b\u52a8\u98de\u5355"===a?_.a.push({pathname:"/report/transfer/"+g.encode(JSON.stringify({uid:e,s_date:l.s_date,s_id:l.s_id,s_period:l.s_period,e_date:l.e_date,e_id:l.e_id,e_period:l.e_period,stat:l.stat,from:"agent"}))}):_.a.push({pathname:"/report/agent2/"+g.encode(JSON.stringify({uid:e,s_date:l.s_date,s_id:l.s_id,s_period:l.s_period,e_date:l.e_date,e_id:l.e_id,e_period:l.e_period,stat:l.stat}))})},r.gotoNav=function(e){var t=r.state.model;_.a.push({pathname:"/report/agent2/"+g.encode(JSON.stringify({uid:e,s_date:t.s_date,s_id:t.s_id,s_period:t.s_period,e_date:t.e_date,e_id:t.e_id,stat:t.stat,e_period:t.e_period}))})},r.goBack=function(){_.a.goBack()},r.htmlNumber=function(e){return e>=0?Object(f.g)(e,2):i.a.createElement("font",{color:"red"},Object(f.g)(e,2))},r.getXiajiOP=function(e,t){for(var a=Object(f.i)(t),l=e["op"+a];l.yoji<=0&&a>1;)l=e["op"+(a=Object(f.i)(a))];return 0===l.yoji?e["op"+t]:l},r.getXiajiRole=function(e,t){for(var a=Object(f.i)(t),l=e["op"+a];l.yoji<=0&&a>1;)l=e["op"+(a=Object(f.i)(a))];return 0===l.yoji?t:a},r.sum=function(e,t){var a=0;return e.forEach(function(e){a+=e[t]}),a},r.sumYoji=function(e,t){for(var a=0,l=0;l<e.length;l++){var n=e[l];a+=n["op"+t].amount*(n["op"+t].yoji-r.getXiajiOP(n,t).yoji)/100}return a},r.getRoleList=function(){for(var e=20,t=new Array;e<r.state.current_role;)t.push(e),70===e?e=999:e+=10;return t},r.sumItem=function(e,t,a){return r.sum(e.map(function(e){return e["op"+t]}),a)},r.export=function(e,t){var a=Object(n.a)(r),l=[];l.push("\u8d26\u53f7"),l.push("\u540d\u79f0"),l.push("\u603b\u7b14\u6570"),l.push("\u603b\u4e0b\u6ce8"),l.push("\u603b\u6709\u6548\u4e0b\u6ce8"),l.push("\u4f1a\u5458\u7ed3\u679c"),r.getRoleList().forEach(function(e){l.push(Object(f.k)(e)+"\u4ea4\u6536")}),l.push("\u5360\u6210\u8d27\u91cf"),l.push("\u5360\u6210\u8f93\u8d62"),l.push("\u9000\u6c34\u5dee"),l.push(Object(f.k)(e)+"\u8f93\u8d62"),l.push("\u4e0a\u7f34\u8d27\u91cf"),l.push(Object(f.k)(e)+"\u4ea4\u6536");var o=[];r.state.list.forEach(function(l){var r=new Array;r.push(l.user.username+(l.role!==t?" ["+l.role_name+"]":"")),r.push(l.user.name),r.push(Object(f.g)(l.total_count)),r.push(Object(f.g)(l.total_amount)),r.push(Object(f.g)(l.total_amount)),r.push(Object(f.g)(l.op1.final_profit)),a.getRoleList().forEach(function(e){r.push(Object(f.g)(l["op"+e].pay_out,2))}),r.push(Object(f.g)(l["op"+e].amount)),r.push(Object(f.g)(l["op"+e].profit)),r.push(Object(f.g)(l["op"+e].fee_in-l["op"+e].fee_out)),r.push(Object(f.g)(l["op"+e].final_profit)),r.push(Object(f.g)(l["op"+e].pay_amout)),r.push(Object(f.g)(l["op"+e].pay_out)),o.push(r)});var s=a.state.model.s_date+"-"+a.state.model.e_date+".xlsx";Object(f.e)(l,o,s)},r.state={inited:!1,loading:!0,totalVO:{total_amount:0,total_yoji:0,total_profit:0,total_final_profit:0},current_role:20,child_role:20,list:[],nav_list:[{}],model:{uid:"",s_date:"",s_id:"",s_period:"",e_date:"",e_id:"",stat:1,e_period:""}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.onHandle()}},{key:"componentWillReceiveProps",value:function(){this.onHandle()}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,l=t.current_role,r=t.child_role,n=t.nav_list,o=t.model,s=(t.stat,t.loading);return i.a.createElement("div",{class:"module m5"},i.a.createElement("div",{name:"module",id:"report_index"},i.a.createElement("div",{className:"caption mt5 pb5"},i.a.createElement("div",{class:"fl"},i.a.createElement("button",{className:"za_button",onClick:this.goBack.bind(this)},"\u8fd4\u56de"),"\xa0\xa0\xa0\xa0",i.a.createElement("button",{className:"btn",style:{marginLeft:"6px"},onClick:this.export.bind(this,l,r)},"\u62a5\u8868\u5907\u4efd"))),i.a.createElement("table",{className:"t-1 f14"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"hl3",colSpan:12+this.getRoleList().length},i.a.createElement("span",null,Object(f.k)(n[n.length-1].role),":",n[n.length-1].username)," | \u65e5\u671f\uff1a",o.s_date," - ",o.e_date," | \u7ed3\u7b97\u72b6\u6001\uff1a",1===o.stat?"\u5df2\u7ed3\u7b97":"\u672a\u7ed3\u7b97")),i.a.createElement("tr",null,i.a.createElement("td",{className:"hl3",colSpan:12+this.getRoleList().length,style:{height:"100px",borderBottom:"none"}},i.a.createElement("div",{style:{float:"left",width:"100%"}},i.a.createElement("label",{style:{padding:"4px 8px",backgroundColor:"Gold",float:"left",marginBottom:"5px"}},"\u6162\u5f69")),i.a.createElement("div",{style:{float:"left",width:"100%"}},i.a.createElement("table",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"hl4",style:{color:"#333"}},"\u5168\u90e8"),i.a.createElement("td",{className:"hl4",style:{color:"#333"}},"\u6fb3\u95e8\u516d\u5408\u5f69")),i.a.createElement("tr",null,i.a.createElement("td",{className:"hl3",style:{color:"red"}},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"final_profit"))),i.a.createElement("td",{className:"hl3",style:{color:"red"}},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"final_profit")))))))),i.a.createElement("tr",null),i.a.createElement("td",{className:"hl3",colSpan:12+this.getRoleList().length,style:{height:"21px",paddingLeft:"0px",borderTop:"none"}},i.a.createElement("label",{style:{padding:"8px 83px 8px 12px",color:"#fff",borderTopRightRadius:"45px",backgroundColor:"#3c1a02"}},"\u5168\u90e8")),i.a.createElement("tr",null,i.a.createElement("td",null,"\u8d26\u53f7"),i.a.createElement("td",null,"\u540d\u79f0"),i.a.createElement("td",null,"\u603b\u7b14\u6570"),i.a.createElement("td",null,"\u603b\u4e0b\u6ce8"),i.a.createElement("td",null,"\u603b\u6709\u6548\u4e0b\u6ce8"),i.a.createElement("td",null,"\u4f1a\u5458\u7ed3\u679c"),this.getRoleList().map(function(e){return i.a.createElement("td",null,Object(f.k)(e),"\u4ea4\u6536")}),i.a.createElement("td",{className:"hl"},"\u5360\u6210\u8d27\u91cf"),i.a.createElement("td",{className:"hl"},"\u5360\u6210\u8f93\u8d62"),i.a.createElement("td",{className:"hl"},"\u9000\u6c34\u5dee"),i.a.createElement("td",{className:"hl"},Object(f.k)(l),"\u8f93\u8d62"),i.a.createElement("td",{className:"hl"},"\u4e0a\u7f34\u8d27\u91cf"),i.a.createElement("td",null,Object(f.k)(l),"\u4ea4\u6536"))),i.a.createElement("tbody",null,s&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:12+this.getRoleList().length},i.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}))),a.map(function(t,a){return i.a.createElement("tr",{className:"fn-over"},i.a.createElement("td",{className:"hl4",style:{textAlign:"center"}},t.role!==l&&i.a.createElement("span",{style:{fontSize:"16px"}},t.user.username),t.role===r&&1!==t.role&&i.a.createElement(u.a,{to:"#",onClick:e.gotoNext.bind(e,t.uid,t.role,"\u4e0b\u7ea7\u98de\u5355")},i.a.createElement("span",{style:{color:"red"}},"\u300a\u4e0b\u7ea7\u98de\u5355\u300b")),t.role!==r&&"\u4f1a\u5458"!==t.role_name&&i.a.createElement("span",null,"\u300a",t.role_name,"\u300b")),i.a.createElement("td",{onClick:e.gotoNext.bind(e,t.uid,t.role,t.role_name),style:{textAlign:"center",cursor:"pointer",fontSize:"16px"}},t.user.name),i.a.createElement("td",{onClick:e.gotoNext.bind(e,t.uid,t.role,t.role_name),style:{color:"red",cursor:"pointer"}},e.htmlNumber(t.total_count)),i.a.createElement("td",null,e.htmlNumber(t.all_total_amount)),i.a.createElement("td",null,e.htmlNumber(t.total_amount)),i.a.createElement("td",null,e.htmlNumber(t.op1.final_profit)),e.getRoleList().map(function(a){return i.a.createElement("td",null,e.htmlNumber(-1*t["op"+a].pay_out))}),i.a.createElement("td",null,e.htmlNumber(t["op"+l].amount)),i.a.createElement("td",null,1!==o.stat?0:e.htmlNumber(-1*(t["op"+l].final_profit-t["op"+l].diff_odds_profit))),i.a.createElement("td",null,e.htmlNumber(t["op"+l].diff_odds_profit)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(1!==o.stat?-1*t["op"+l].diff_odds_profit:-1*t["op"+l].final_profit)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(t["op"+l].pay_amout)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(-1*t["op"+l].pay_out)))})),i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"hl5"},"\u5408\u8ba1"),i.a.createElement("td",{className:"hl5"}),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_count"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"all_total_amount"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_amount"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e.op1}),"final_profit"))),this.getRoleList().map(function(t){return i.a.createElement("td",{className:"hl5"},e.htmlNumber(-1*e.sum(a.map(function(e){return e["op"+t]}),"pay_out")))}),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"amount"))),i.a.createElement("td",{className:"hl5"},1!==o.stat?0:this.htmlNumber(-1*(this.sumItem(a,l,"final_profit")-this.sumItem(a,l,"diff_odds_profit")))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sumItem(a,l,"diff_odds_profit"))),i.a.createElement("td",{style:{backgroundColor:"red",color:"#fff"}},Object(f.g)(1!==o.stat?-1*this.sumItem(a,l,"diff_odds_profit"):-1*this.sumItem(a,l,"final_profit"),2)),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"pay_amout"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(-1*this.sum(a.map(function(e){return e["op"+l]}),"pay_out")))),i.a.createElement("tr",{className:"fn-over"},i.a.createElement("td",{colSpan:12+this.getRoleList().length,style:{backgroundColor:"#80624d",textAlign:"center",color:"#fff",cursor:"pointer"}},"\u6536\u8d77\u8be6\u60c5\u62a5\u8868")))),i.a.createElement("table",{className:"t-1 f14",style:{marginTop:"15px"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"hl3",colSpan:12+this.getRoleList().length,style:{height:"21px",paddingLeft:"0px",borderTop:"none"}},i.a.createElement("label",{style:{padding:"8px 83px 8px 12px",color:"#fff",borderTopRightRadius:"45px",backgroundColor:"#3c1a02"}},"\u6fb3\u95e8\u516d\u5408\u5f69"))),i.a.createElement("tr",null,i.a.createElement("td",null,"\u8d26\u53f7"),i.a.createElement("td",null,"\u540d\u79f0"),i.a.createElement("td",null,"\u603b\u7b14\u6570"),i.a.createElement("td",null,"\u603b\u4e0b\u6ce8"),i.a.createElement("td",null,"\u603b\u6709\u6548\u4e0b\u6ce8"),i.a.createElement("td",null,"\u4f1a\u5458\u7ed3\u679c"),this.getRoleList().map(function(e){return i.a.createElement("td",null,Object(f.k)(e),"\u4ea4\u6536")}),i.a.createElement("td",{className:"hl"},"\u5360\u6210\u8d27\u91cf"),i.a.createElement("td",{className:"hl"},"\u5360\u6210\u8f93\u8d62"),i.a.createElement("td",{className:"hl"},"\u9000\u6c34\u5dee"),i.a.createElement("td",{className:"hl"},Object(f.k)(l),"\u8f93\u8d62"),i.a.createElement("td",{className:"hl"},"\u4e0a\u7f34\u8d27\u91cf"),i.a.createElement("td",null,Object(f.k)(l),"\u4ea4\u6536"))),i.a.createElement("tbody",null,s&&i.a.createElement("tr",null,i.a.createElement("td",{colSpan:12+this.getRoleList().length},i.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}))),a.map(function(t,a){return i.a.createElement("tr",{className:"fn-over"},i.a.createElement("td",{className:"hl4",style:{textAlign:"center"}},t.role!==l&&i.a.createElement("span",{style:{fontSize:"16px"}},t.user.username),t.role===r&&1!==t.role&&i.a.createElement(u.a,{to:"#",onClick:e.gotoNext.bind(e,t.uid,t.role,"\u4e0b\u7ea7\u98de\u5355")},i.a.createElement("span",{style:{color:"red"}},"\u300a\u4e0b\u7ea7\u98de\u5355\u300b")),t.role!==r&&"\u4f1a\u5458"!==t.role_name&&i.a.createElement("span",null,"\u300a",t.role_name,"\u300b")),i.a.createElement("td",{onClick:e.gotoNext.bind(e,t.uid,t.role,t.role_name),style:{textAlign:"center",cursor:"pointer",fontSize:"16px"}},t.user.name),i.a.createElement("td",null,i.a.createElement(u.a,{to:"#",onClick:e.gotoNext.bind(e,t.uid,t.role,t.role_name)},e.htmlNumber(t.total_count))),i.a.createElement("td",null,e.htmlNumber(t.all_total_amount)),i.a.createElement("td",null,e.htmlNumber(t.total_amount)),i.a.createElement("td",null,e.htmlNumber(t.op1.final_profit)),e.getRoleList().map(function(a){return i.a.createElement("td",null,e.htmlNumber(-1*t["op"+a].pay_out))}),i.a.createElement("td",null,e.htmlNumber(t["op"+l].amount)),i.a.createElement("td",null,1!==o.stat?0:e.htmlNumber(-1*(t["op"+l].final_profit-t["op"+l].diff_odds_profit))),i.a.createElement("td",null,e.htmlNumber(t["op"+l].diff_odds_profit)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(1!==o.stat?-1*t["op"+l].diff_odds_profit:-1*t["op"+l].final_profit)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(t["op"+l].pay_amout)),i.a.createElement("td",{className:"colBg"},e.htmlNumber(-1*t["op"+l].pay_out)))})),i.a.createElement("tfoot",{className:"tr bold"},i.a.createElement("tr",null,i.a.createElement("td",{className:"hl5"},"\u5408\u8ba1"),i.a.createElement("td",{className:"hl5"}),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_count"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"all_total_amount"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_amount"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e.op1}),"final_profit"))),this.getRoleList().map(function(t){return i.a.createElement("td",{className:"hl5"},e.htmlNumber(-1*e.sum(a.map(function(e){return e["op"+t]}),"pay_out")))}),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"amount"))),i.a.createElement("td",{className:"hl5"},1!==o.stat?0:this.htmlNumber(-1*(this.sumItem(a,l,"final_profit")-this.sumItem(a,l,"diff_odds_profit")))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sumItem(a,l,"diff_odds_profit"))),i.a.createElement("td",{style:{backgroundColor:"red",color:"#fff"}},Object(f.g)(1!==o.stat?-1*this.sumItem(a,l,"diff_odds_profit"):-1*this.sumItem(a,l,"final_profit"),2)),i.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+l]}),"pay_amout"))),i.a.createElement("td",{className:"hl5"},this.htmlNumber(-1*this.sum(a.map(function(e){return e["op"+l]}),"pay_out"))))))))}}]),a}(m.Component);t.default=Object(d.g)(Object(h.a)(function(){return{}},function(e){return Object(p.c)({getReportByAgent:E.k},e)})(N))}}]);