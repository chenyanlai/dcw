(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{449:function(e,t,a){"use strict";var n=a(10),r=a(13),l=a(28),o=a(15),s=a(16),c=a(8),i=a(0),u=a.n(i),p=(a(47),a(4),a(5));function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var h=function(e){Object(o.a)(a,e);var t=m(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onPage=function(e){e<=0||(r.setState({current_page:e}),r.props.onPage&&r.props.onPage(e))},r.onPageGo=function(){var e=document.getElementById("page_nav_go_inp").value;if(""!==e){var t=parseInt(e);t<=0||t>r.state.total_page||(r.setState({current_page:t}),r.props.onPage&&r.props.onPage(t))}},r.getPageData=function(e,t){if(t.length<=12)return t;var a=new Array;return e<=2?(a.push(t[0]),a.push(t[1]),a.push(t[2]),a.push(t[3]),a.push(t[5]),a.push({idx:0,label:" . . . "}),a.push(t[t.length-5]),a.push(t[t.length-4]),a.push(t[t.length-3]),a.push(t[t.length-2]),a.push(t[t.length-1])):(a.push(t[e-3]),a.push(t[e-2]),a.push(t[e-1]),e<=t.length-1&&a.push(t[e]),e+1<=t.length-1&&(a.push(t[e+1]),t.length-5>e+2&&a.push({idx:0,label:" . . . "}),e+2<=t.length-5&&a.push(t[t.length-5]),e+2<=t.length-4&&a.push(t[t.length-4]),e+2<=t.length-3&&a.push(t[t.length-3]),e+2<=t.length-2&&a.push(t[t.length-2]),e+2<=t.length-1&&a.push(t[t.length-1]))),a},r.getS1=function(e,t,a,n){return u.a.createElement("div",{name:"module",id:"pager",class:"pager",action:"result",format:"format_result"},"\u7b2c ",u.a.createElement("span",{class:"pageindex red"},e)," \u9875 \u5171 ",u.a.createElement("span",{class:"pagecount red"},t)," \u9875 \u5171 ",u.a.createElement("span",{class:"recordcount red"},a)," \u6761",u.a.createElement("a",{href:"javascript:void(0)",class:"fn-first",onClick:r.onPage.bind(Object(l.a)(r),1)},"\u9996\u9875"),1===e&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-prev"},"\u4e0a\u4e00\u9875"),e>1&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-prev",onClick:r.onPage.bind(Object(l.a)(r),e-1)},"\u4e0a\u4e00\u9875"),e===t&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-next"},"\u4e0b\u4e00\u9875"),e<t&&u.a.createElement("a",{href:"javascript:void(0)",class:"fn-next",onClick:r.onPage.bind(Object(l.a)(r),e+1)},"\u4e0b\u4e00\u9875"),u.a.createElement("a",{href:"javascript:void(0)",class:"fn-last",onClick:r.onPage.bind(Object(l.a)(r),t)},"\u5c3e\u9875"),u.a.createElement("input",{type:"text",id:"page_nav_go_inp",class:"input w30 fn-index"}),"\xa0",u.a.createElement("input",{type:"button",onClick:r.onPageGo.bind(Object(l.a)(r)),class:"btn btn-gray w30 fn-go",value:"GO"}))},r.getS2=function(e,t,a,n){return u.a.createElement("nav",{"aria-label":"Page navigation"},u.a.createElement("ul",{class:"pagination pagination-lg justify-content-center"},e>1&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u9996\u9875")),1===e&&u.a.createElement("li",{class:"page-item disabled"},u.a.createElement("a",{class:"page-link",href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0a\u4e00\u9801")),e>1&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),e-1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0a\u4e00\u9801")),r.getPageData(e,n).map(function(t){return u.a.createElement("li",{className:e===t.idx?"page-item active":"page-item"},u.a.createElement("a",{onClick:r.onPage.bind(Object(l.a)(r),t.idx),className:"page-link",href:"javascript:;"},t.label))}),e===t&&u.a.createElement("li",{class:"page-item disabled"},u.a.createElement("a",{class:"page-link",href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0b\u4e00\u9801")),e<t&&u.a.createElement("li",{class:"page-item"},u.a.createElement("a",{class:"page-link",onClick:r.onPage.bind(Object(l.a)(r),e+1),href:"javascript:;",tabindex:"-1","aria-disabled":"true"},"\u4e0b\u4e00\u9801"))))},r.state={pager:{},list:[],total_page:1,current_page:1,total:0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.pager;this.setData(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.pager;this.setData(e)}},{key:"setData",value:function(e){if(!p.a.isEqual(e,this.state.pager)){var t=Math.floor(e.total/e.size);e.total%e.size!==0&&t++;for(var a=new Array,n=1;n<=t;n++)a.push({idx:n,label:n});var r=e.offset/e.size+1;this.setState({list:a,total_page:t,current_page:r,total:e.total,pager:e})}}},{key:"render",value:function(){var e=this.state,t=e.current_page,a=e.total_page,n=e.list,r=e.total;return this.getS1(t,a,r,n)}}]),a}(i.Component);t.a=h},450:function(e,t,a){(function(e,n){var r;!function(l){var o=t,s=(e&&e.exports,"object"==typeof n&&n);s.global!==s&&s.window;var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var i=function(e){throw new c(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=/[\t\n\f\r ]/g,m={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var t,a,n,r,l=e.length%3,o="",s=-1,c=e.length-l;++s<c;)t=e.charCodeAt(s)<<16,a=e.charCodeAt(++s)<<8,n=e.charCodeAt(++s),o+=u.charAt((r=t+a+n)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==l?(t=e.charCodeAt(s)<<8,a=e.charCodeAt(++s),o+=u.charAt((r=t+a)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==l&&(r=e.charCodeAt(s),o+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(p,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var a,n,r=0,l="",o=-1;++o<t;)n=u.indexOf(e.charAt(o)),a=r%4?64*a+n:n,r++%4&&(l+=String.fromCharCode(255&a>>(-2*r&6)));return l},version:"0.1.0"};void 0===(r=function(){return m}.call(t,a,t,e))||(e.exports=r)}()}).call(this,a(207)(e),a(56))},653:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(13),l=a(28),o=a(15),s=a(16),c=a(8),i=a(0),u=a.n(i),p=a(39),m=a(17),h=a(47),d=a(4),f=a(5),g=a(57),b=a(76);a(449);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var E=a(450),v=function(e){Object(o.a)(a,e);var t=_(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).onHandle=function(){var e=Object(l.a)(r),t=r.props.match.params.model;try{var a=JSON.parse(E.decode(t));e.setState({model:a,loading:!0},function(){e.props.getMonthlyPlayNameReport(a.s_id,a.e_id,a.stat,function(t){e.setState({list:t,loading:!1})})})}catch(n){alert(n),g.a.goBack()}},r.goBack=function(){g.a.goBack()},r.htmlNumber=function(e){return e>=0?Object(d.g)(e,2):u.a.createElement("font",{color:"red"},Object(d.g)(e,2))},r.sum=function(e,t){var a=0;return e.forEach(function(e){a+=e[t]}),a},r.onGoto=function(e,t){var a=r.state.model,n=E.encode(JSON.stringify({uid:"me",s_date:a.s_date,s_id:a.s_id,s_period:a.s_period,e_date:a.e_date,e_id:a.e_id,e_period:a.e_period,stat:a.stat,playname:encodeURIComponent(e)}));g.a.push({pathname:"/report/orderlist/"+n})},r.getRoleList=function(){for(var e=20,t=new Array;e<r.state.current_role;)t.push(e),70===e?e=999:e+=10;return t},r.sumItem=function(e,t,a){return r.sum(e.map(function(e){return e["op"+t]}),a)},r.export=function(e,t){var a=Object(l.a)(r),n=[];n.push("\u5f69\u79cd"),n.push("\u603b\u7b14\u6570"),n.push("\u603b\u4e0b\u6ce8"),n.push("\u603b\u6709\u6548\u4e0b\u6ce8"),n.push("\u4f1a\u5458\u7ed3\u679c"),r.getRoleList().forEach(function(e){n.push(Object(d.k)(e)+"\u4ea4\u6536")}),n.push("\u5360\u6210\u8d27\u91cf"),n.push("\u5360\u6210\u8f93\u8d62"),n.push("\u9000\u6c34\u5dee"),n.push(Object(d.k)(e)+"\u8f93\u8d62"),n.push("\u4e0a\u7f34\u8d27\u91cf"),n.push(Object(d.k)(e)+"\u4ea4\u6536");var o=[];r.state.list.forEach(function(t){var n=new Array;n.push(t.play_name),n.push(Object(d.g)(t.order_count)),n.push(Object(d.g)(t.total_amount)),n.push(Object(d.g)(t.total_amount)),n.push(Object(d.g)(t.op1.final_profit)),a.getRoleList().forEach(function(e){n.push(Object(d.g)(t["op"+e].pay_out,2))}),n.push(Object(d.g)(t["op"+e].amount)),n.push(Object(d.g)(t["op"+e].profit)),n.push(Object(d.g)(t["op"+e].fee_in-t["op"+e].fee_out)),n.push(Object(d.g)(t["op"+e].final_profit)),n.push(Object(d.g)(t["op"+e].pay_amout)),n.push(Object(d.g)(t["op"+e].pay_out)),o.push(n)});var s=a.state.model.s_date+"-"+a.state.model.e_date+".xlsx";Object(d.e)(n,o,s)},r.state={inited:!1,loading:!0,current_role:window.role,child_role:Object(d.i)(window.role),totalVO:{total_amount:0,total_yoji:0,total_profit:0,total_final_profit:0},pager:{offset:0,size:50,total:0},list:[],uid:"",loginer:{role:20,username:""},model:{uid:"",s_date:"",s_id:"",s_period:"",e_date:"",e_id:"",e_period:"",stat:1}},r}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){f.a.isEqual(this.props.loginer,this.state.loginer)||this.setState({loginer:this.props.loginer})}},{key:"componentDidMount",value:function(){this.onHandle(),f.a.isEqual(this.props.loginer,this.state.loginer)||this.setState({loginer:this.props.loginer})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.loginer,r=t.current_role,l=t.child_role,o=t.model,s=t.loading;return u.a.createElement("div",{class:"module m5"},u.a.createElement("div",{name:"module",id:"report_index"},u.a.createElement("div",{className:"caption mt5 pb5"},u.a.createElement("div",{class:"fl"},u.a.createElement("button",{className:"za_button",onClick:this.goBack.bind(this)},"\u8fd4\u56de"),"\xa0\xa0\xa0\xa0",u.a.createElement("button",{className:"btn",style:{marginLeft:"6px"},onClick:this.export.bind(this,r,l)},"\u62a5\u8868\u5907\u4efd"))),u.a.createElement("table",{className:"t-1 f14"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("td",{className:"hl3",colSpan:12+this.getRoleList().length},u.a.createElement("span",null,Object(d.k)(r),":",n.username)," | \u65e5\u671f\uff1a",o.s_date," - ",o.e_date," | \u7ed3\u7b97\u72b6\u6001\uff1a",0===o.stat?"\u672a\u7ed3\u7b97":"\u5df2\u7ed3\u7b97")),u.a.createElement("tr",null,u.a.createElement("td",null,"\u5f69\u79cd"),u.a.createElement("td",null,"\u603b\u7b14\u6570"),u.a.createElement("td",null,"\u603b\u4e0b\u6ce8"),u.a.createElement("td",null,"\u603b\u6709\u6548\u4e0b\u6ce8"),u.a.createElement("td",null,"\u4f1a\u5458\u7ed3\u679c"),this.getRoleList().map(function(e){return u.a.createElement("td",null,Object(d.k)(e),"\u4ea4\u6536")}),u.a.createElement("td",{className:"hl"},"\u5360\u6210\u8d27\u91cf"),u.a.createElement("td",{className:"hl"},"\u5360\u6210\u8f93\u8d62"),u.a.createElement("td",{className:"hl"},"\u9000\u6c34\u5dee"),u.a.createElement("td",{className:"hl"},Object(d.k)(r),"\u8f93\u8d62"),u.a.createElement("td",{className:"hl"},"\u4e0a\u7f34\u8d27\u91cf"),u.a.createElement("td",null,Object(d.k)(r),"\u4ea4\u6536"))),u.a.createElement("tbody",null,s&&u.a.createElement("tr",null,u.a.createElement("td",{colSpan:12+this.getRoleList().length},u.a.createElement("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}))),a.map(function(t,a){return u.a.createElement("tr",{className:"fn-over"},u.a.createElement("td",{className:"hl4",onClick:e.onGoto.bind(e,t.play_name,t.name),style:{cursor:"pointer",textAlign:"center"}},t.play_name),u.a.createElement("td",{onClick:e.onGoto.bind(e,t.play_name,t.name),style:{color:"red",cursor:"pointer"}},e.htmlNumber(t.order_count)),u.a.createElement("td",null,e.htmlNumber(t.all_total_amount)),u.a.createElement("td",null,e.htmlNumber(t.total_amount)),u.a.createElement("td",null,e.htmlNumber(t.op1.final_profit)),e.getRoleList().map(function(a){return u.a.createElement("td",null,e.htmlNumber(-1*t["op"+a].pay_out))}),u.a.createElement("td",null,e.htmlNumber(t["op"+r].amount)),u.a.createElement("td",null,1!==o.stat?0:e.htmlNumber(-1*(t["op"+r].final_profit-t["op"+r].diff_odds_profit))),u.a.createElement("td",null,e.htmlNumber(t["op"+r].diff_odds_profit)),u.a.createElement("td",{className:"colBg"},e.htmlNumber(1!==o.stat?-1*t["op"+r].diff_odds_profit:-1*t["op"+r].final_profit)),u.a.createElement("td",{className:"colBg"},e.htmlNumber(t["op"+r].pay_amout)),u.a.createElement("td",{className:"colBg"},e.htmlNumber(-1*t["op"+r].pay_out)))})),u.a.createElement("tfoot",{className:"tr bold"},u.a.createElement("tr",null,u.a.createElement("td",{className:"hl5"},"\u5408\u8ba1"),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"order_count"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"all_total_amount"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a,"total_amount"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e.op1}),"final_profit"))),this.getRoleList().map(function(t){return u.a.createElement("td",{className:"hl5"},e.htmlNumber(-1*e.sum(a.map(function(e){return e["op"+t]}),"pay_out")))}),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+r]}),"amount"))),u.a.createElement("td",{className:"hl5"},1!==o.stat?0:this.htmlNumber(-1*(this.sumItem(a,r,"final_profit")-this.sumItem(a,r,"diff_odds_profit")))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sumItem(a,r,"diff_odds_profit"))),u.a.createElement("td",{style:{backgroundColor:"red",color:"#fff"}},Object(d.g)(1!==o.stat?-1*this.sumItem(a,r,"diff_odds_profit"):-1*this.sumItem(a,r,"final_profit"),2)),u.a.createElement("td",{className:"hl5"},this.htmlNumber(this.sum(a.map(function(e){return e["op"+r]}),"pay_amout"))),u.a.createElement("td",{className:"hl5"},this.htmlNumber(-1*this.sum(a.map(function(e){return e["op"+r]}),"pay_out"))))))))}}]),a}(i.Component);t.default=Object(p.g)(Object(h.a)(function(e){return{loginer:e.auth.user}},function(e){return Object(m.c)({getMonthlyPlayNameReport:b.j},e)})(v))}}]);